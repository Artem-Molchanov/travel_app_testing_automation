### _План автоматизации тестирования веб-приложения по покупке тура "Путешествие дня"_

# 1. Перечень автоматизируемых сценариев

## 1.1. Тестирование UI покупки путешествия через оплату дебетовой картой

### 1.1.1. Позитивный сценарий ("happy path"):

* Заходим в веб приложение по адресу: http://localhost:8080/ ;
* Нажимаем кнопку "Купить";
* Вводим тестовые данные:

| _**Валидные тестовые данные**_   | 
|----------------------------------|
| Номер карты: 4444 4444 4444 4441 |     
| Месяц: 12                        |  
| Год: 25                          |     
| Владелец: Ivanov Ivan            |     
| CVC/CCV: 999                     |     
* Нажимаем кнопку "Продолжить";
* Ожидаемый результат: "Операция одобрена банком".

### 1.1.1.2. Позитивный сценарий ("happy path"):

* Действия аналогичны [п. 1.1.1.](#111-позитивный-сценарий-happy-path), кроме ввода следующих параметров:

| _**Валидные тестовые данные**_   | 
|----------------------------------|
| Номер карты: 4444 4444 4444 4442 |     
| Месяц: 01                        |  
| Год: 24                          |     
| Владелец: Petrov Aleksandr       |     
| CVC/CCV: 001                     |     
* Нажимаем кнопку "Продолжить";
* Ожидаемый результат: "Операция одобрена банком".
### 1.1.2 Негативные сценарии:
* Действия аналогичны [п. 1.1.1.](#111-позитивный-сценарий-happy-path), кроме ввода любых следующих параметров:

| _Невалидные тестовые данные_        | _Поле_      | _Ожидаемый результат_                           |
|-------------------------------------|-------------|-------------------------------------------------|
| Ввод значения менее 16ти цифр       | Номер карты | Сообщение: "Неверный формат"                    |
| Ввод значения более 16ти цифр       | Номер карты | Форма блокирует ввод                            |
| Ввод любых символов кроме чисел     | Номер карты | Форма блокирует ввод                            |
| Поле  не заполнено                  | Номер карты | Сообщение: "Поле обязательно для заполнения     |
| Ввод числового значения более 12ти  | Месяц       | Сообщение: "Неверно указан срок действия карты" |
| Ввод числового значения менее 01    | Месяц       | Сообщение: "Неверно указан срок действия карты" |
| Ввод более двух цифр                | Месяц       | Форма блокирует ввод                            |
| Ввод одной цифры                    | Месяц       | Сообщение: "Неверный формат"                    |
| Ввод номера месяца, меньше текущего | Месяц       | Сообщение: "Неверно указан срок действия карты" |
| Поле не заполнено                   | Месяц       | Сообщение: "Поле обязательно для заполнения"    |
| Ввод номера года, меньше текущего   | Год         | Сообщение: "Неверно указан срок действия карты" |
| Ввод более двух цифр                | Год         | Форма блокирует ввод                            |
| Ввод одной цифры                    | Год         | Сообщение: "Неверный формат"                    |
| Поле не заполнено                   | Год         | Сообщение: "Поле обязательно для заполнения"    |
| Ввод значений на кириллице          | Владелец    | Сообщение: "Неверный формат                     |
| Ввод любых цифровых значений        | Владелец    | Сообщение: "Неверный формат"                    |
| Поле  не заполнено                  | Владелец    | Сообщение: "Поле обязательно для заполнения"    |
| Ввод более трех цифр                | CVC/CVV     | Сообщение: "Неверный формат"                    |
| Ввод менее трех цифр                | CVC/CVV     | Сообщение: "Неверный формат"                    |
| Ввод любых символов кроме чисел     | CVC/CVV     | Сообщение: "Неверный формат"                    |
| Поле не заполнено                   | CVC/CVV     | Сообщение: "Поле обязательно для заполнения"    |

## 1.2. Тестирование UI покупки путешествия через покупку в кредит

### 1.2.1. Позитивный сценарий ("happy path"):

* Действия аналогичны  [п. 1.1.1.](#111-позитивный-сценарий-happy-path), кроме нажатия на кнопку "Купить в кредит".

### 1.2.2. Негативные сценарии:

* Действия аналогичны [п. 1.1.2.](#112-негативные-сценарии), , кроме нажатия на кнопку "Купить в кредит".

## 1.3. Тестирование записей в СУБД на MySQL\PostgreSQL

### 1.3.1. Позитивный сценарий покупки путешествия через оплату дебетовой картой ("happy path")

* Проведение действий согласно [п. 1.1.1.](#111-позитивный-сценарий-happy-path)
* Отправка в СУБД SQL запроса о статусе проведения платежа;
* Ожидаемый результат: запись в БД об успешно проведении платежа;
* Отправка в СУБД SQL об наличии\отсутствии записей о номере банковской карты;
* Ожидаемый результат: запись в БД об отсутствии номера банковской карты.

### 1.3.2. Негативный сценарий покупки путешествия через оплату дебетовой картой

* Проведение действий согласно [п. 1.1.2.](#112-негативные-сценарии) ;
* Проведение действий согласно [п. 1.3.1.](#131-позитивный-сценарий-покупки-путешествия-через-оплату-дебетовой-картой-happy-path), кроме ожидаемого результата;
* Ожидаемый результат: запись в БД об неуспешном проведении платежа.

### 1.3.3. Позитивный сценарий покупки путешествия через покупку в кредит ("happy path")

* Проведение действий согласно [п. 1.3.1.](#131-позитивный-сценарий-покупки-путешествия-через-оплату-дебетовой-картой-happy-path), только используется кнопка "Купить в кредит".

### 1.3.4. Негативный сценарий покупки путешествия через покупку в кредит

* Проведение действий согласно [п. 1.3.2](#132-негативный-сценарий-покупки-путешествия-через-оплату-дебетовой-картой), только используется кнопка "Купить в кредит"

### 1.3.5. Проверка записей в базах данных 

* Проверка данных указанных в п.п. 1.3.1. - 1.3.4. сначала происходит через MySQL, потом через PostgreSQL.


## 1.4. Тестирование доступа к симулятору банковских сервисов

### 1.4.1. Отправка на сервис запроса по принятой карте
* Подготовка GET запроса с № карты "4444 4444 4444 4441";
* Отправка запроса на сервер http://localhost:9000 ;
* Ожидаемый результат: код 200.
### 1.4.2. Отправка на сервис запроса по отклоненной карте
* Подготовка GET запроса с № карты "4444 4444 4444 4442";
* Отправка запроса на сервер http://localhost:9000 ;
* Ожидаемый результат: код 200.

# 2. Перечень используемых инструментов

| _Тип инструмента_                          | _Наименование_          | _Обоснование_                                                                                                                                                                                                                         |
|--------------------------------------------|-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Язык разработки автотестов                 | Java (версия 11)        | Мультифункциональность; достаточно простой синтаксис; независимость (код сможет работать на любой платформе, поддерживающей Java);<br/> Версия 11 совместима с библиотеками по автотестам.                                            |
| Среда разработки                           | IntelliJ IDEA 2023.1.3. | Поддерживает широкий набор фреймворков и технологий для бэкенда и фронтенда и включает инструменты для профилирования и работы с базами данных                                                                                        |
| Среда тестирования                         | JUnit5                  | Популярная среда модульного тестирования в экосистеме Java. Версия JUnit 5 содержит ряд интересных нововведений с целью поддержки новых функций в Java 8 и более поздних версиях , а также обеспечения различных стилей тестирования. |
| Браузер                                    | Chrome                  | Лучшие консольные решения                                                                                                                                                                                                             |
| API Rest                                   | Rest Assured            | Удобная библиотека для тестирования веб-приложений на базе JSON и XML. Кроме того, он полностью поддерживает все методы, включая GET, PUT, POST, PATCH и DELETE                                                                       |
| Платформа контейнерного запуска приложений | Docker                  | Docker позволяет создавать контейнеры, автоматизировать их запуск и развертывание, управляет жизненным циклом                                                                                                                         |
| Управление СУБД                            | MySQL                   | Высокая скорость работы, поддержка практически всех CMS,бесплатная лицензия.                                                                                                                                                          |
| Управление СУБД                            | PostgreSQL              | Полная совместимость с SQL и ACID. Удобство работы за счет разных индексов. Легкость миграции на другое решение. Поддерживает JSON и другие функции NoSQL.                                                                            |
| Управление браузером                       | Selenide                | Легкий синтаксис                                                                                                                                                                                                                      |
| Генерация наполнения                       | Faker                   | Широкие возможности генерации данных в соответствии с потребностями.                                                                                                                                                                  |
| Автоматизация сборки                       | Gradle                  | Позволяет реализовать большие многомодульные сборки путем последовательного и параллельного выполнения основных и добавочных модулей;                                                                                                 |
| Оптимизация кода                           | Lombok                  | Сокращение объемов кода                                                                                                                                                                                                               |
| Отчеты по автотестам                       | Allure                  | Красивые и понятные отчеты                                                                                                                                                                                                            |

# 3. Перечень возможных рисков при автоматизации

| _Риски_                                               | _Описание_                                                                                                                                                                  |                                                                                                                                                                                                                       
|-------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Отсутствие тестовых меток в html коде страниц сервиса | Разработка кода без тестовых меток ведет к значительным временным затратам по поиску подходящего кода тестируемых объектов, за которые можно было бы "зацепится" Selenid'ом |
| Проблемы с запуском Gate simulator                    | Неочевидные условия при докеризации симулятора                                                                                                                              |
| Недостаток опыта работы с кодом                       | Проблемы с синтаксисом кода, временные затраты на оптимизацию и отладку.                                                                                                    |


# 4. Интервальная оценка

### 4.1. Планируемые времязатраты на реализацию:
* 72 часа.

# 5. План сдачи работ

### 5.1. Дата завершения подготовки автотестов:
* 18 августа 2023 года.

### 5.2. Дата завершения прогона автотестов:
* 23 августа 2023 года.